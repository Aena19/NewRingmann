<div class="container landing-container">    
    <p class="tech-heading text-center ">
        Products
    </p>
    <div class="d-none d-md-flex justify-content-between ">
        <div class="d-inline-flex filter-text">
            Filter : 
            <app-price-filter [products] = finalProducts [filterUpdate] = priceFilterUpdate [selectedValues] = selectedPriceValues [removeFilter] = filterToBeRemoved (filterValueChangeEvent) = "getFilterValues($event)"></app-price-filter>
            <app-flange-filter [products] = finalProducts [filterUpdate] = flangeFilterUpdate [selectedValues] = selectedFlangeValues [removeFilter] = filterToBeRemoved (filterValueChangeEvent) = "getFilterValues($event)"></app-flange-filter>
            <app-size-filter [products] = finalProducts [filterUpdate] = sizeFilterUpdate [selectedValues] = selectedSizeValues [removeFilter] = filterToBeRemoved (filterValueChangeEvent) = "getFilterValues($event)"></app-size-filter>
        </div>    
        <div class="d-inline-flex filter-text gap-2 ">
            <app-sort-products-dropdown (sortOptionChangeEvent) ="sortProducts($event)"></app-sort-products-dropdown>
            <p>{{productsToBeDisplayedCount}} products</p>
        </div>
    </div>
    <nav class="navbar d-md-none">
        <div class="container-fluid">
            <!-- <div></div> -->
            <button class="navbar-toggler filter-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapsibleFilter" aria-expanded="false" id="filterButton">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-funnel" viewBox="0 0 16 16">
                    <path d="M1.5 1.5A.5.5 0 0 1 2 1h12a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.128.334L10 8.692V13.5a.5.5 0 0 1-.342.474l-3 1A.5.5 0 0 1 6 14.5V8.692L1.628 3.834A.5.5 0 0 1 1.5 3.5v-2zm1 .5v1.308l4.372 4.858A.5.5 0 0 1 7 8.5v5.306l2-.666V8.5a.5.5 0 0 1 .128-.334L13.5 3.308V2h-11z"/>
                </svg>
                <span class="filter-sort-text"> Filter & Sort</span>
            </button>
            <p>{{productsToBeDisplayedCount}} products</p>
        
            <div class="collapse navbar-collapse bg-white fixed-top w-75 h-100 border border-1 rounded-2" id="collapsibleFilter">
                <!-- <div class="container-fluid"> -->
                    <div class="d-flex justify-content-end">
                        <span class="filter-bar-close m-2" (click)="closeFilterBar()">X</span>
                    </div>
                    <div class="text-center">
                        Filter & Sort
                        <br>
                        {{productsToBeDisplayedCount}} of {{totalProductsCount}} products
                    </div>
                    <hr>
                    <div class="d-flex">
                        <ul class="navbar-nav filter-text justify-content-end ">
                            <li class="nav-item">
                                <app-price-filter [products] = finalProducts [filterUpdate] = priceFilterUpdate [selectedValues] = selectedPriceValues [removeFilter] = filterToBeRemoved (filterValueChangeEvent) = "getFilterValues($event)"></app-price-filter>
                            </li>
                            <li class="nav-item">
                                <app-flange-filter [products] = finalProducts [filterUpdate] = flangeFilterUpdate [selectedValues] = selectedFlangeValues [removeFilter] = filterToBeRemoved (filterValueChangeEvent) = "getFilterValues($event)"></app-flange-filter>
                            </li>
                            <li class="nav-item">
                                <app-size-filter [products] = finalProducts [filterUpdate] = sizeFilterUpdate [selectedValues] = selectedSizeValues [removeFilter] = filterToBeRemoved (filterValueChangeEvent) = "getFilterValues($event)"></app-size-filter>
                            </li>
                            <br>
                            <li class="nav-item">
                                <app-sort-products-dropdown (sortOptionChangeEvent) ="sortProducts($event)"></app-sort-products-dropdown>
                            </li>
                        </ul>
                    </div>
                    <hr>
                    <div class="d-flex justify-content-center gap-3 ">
                        <button type="button" class="btn btn-outline-danger" (click)="removeAllFilters()">Remove All</button>
                        <button type="button" class="btn btn-dark" (click)="closeFilterBar()">Apply</button>
                    </div>
                    
                <!-- </div> -->
                
            </div>
             
        </div>
    </nav>
    <div *ngIf="selectedPriceValues.length != 0 || selectedFlangeValues.length != 0 || selectedSizeValues.length != 0" class="d-flex flex-wrap position-relative filter-applied-text m-2 align-items-center gap-2 col-5 col-md-6 col-lg-10 col-xl-12">
        <div>Filters applied :</div>
        <div class="filters" (click)="removeFilter(p,'Price')" *ngFor="let p of selectedPriceValues"> Price : {{p.substring(0,p.length - 4)}} &nbsp; X</div>
        <div class="filters" (click)="removeFilter(f,'Flange')" *ngFor="let f of selectedFlangeValues"> Flange : {{f.substring(0,f.length - 4)}} &nbsp; X</div>
        <div class="filters" (click)="removeFilter(s,'Size(idxfdxh)')" *ngFor="let s of selectedSizeValues"> Size : {{s.substring(0,s.length - 4)}} &nbsp; X</div>
        <div class="remove-all-filters" (click)="removeAllFilters()">Remove all</div>
    </div>
    <app-product-list [products] = finalProducts></app-product-list>
</div>